# プログラムを実行するまで
Stackをインストールしたが、これだけではコンパイラも何も存在しない状態なので、
まだHaskellのコードを実行できない。
プログラムを実行するには、Stackを使って1つ開発環境を作らなければならない。

[こちら](http://seanhess.github.io/2015/08/04/practical-haskell-getting-started.html)を参考に、Stackを使ってみる。

## stack newコマンドでプロジェクトを作る
以下のコマンドを実行することでプロジェクトを作成できる。
```
stack new my-project simple
```

- my-project：プロジェクト名
- simple：使いたいテンプレート

コマンドを実行すると、my-projectディレクトリが作成される。
プロジェクトを作る過程でsimpleテンプレートをダウンロードしてきているようだ。

あと、author-nameその他色々を~/.stack/config.yamlに書いておくように言われる。
stack newコマンドに-pオプションを付ければ逐一指定できるようだが、
面倒くさいのでconfig.yamlを編集することにする。

my-projectディレクトリの構造は以下の通りである。
```
.
├── LICENSE
├── README.md
├── Setup.hs
├── my-project.cabal - プロジェクト（パッケージ）の説明
├── src
│   └── Main.hs - これから作るプログラムのメインモジュール
└── stack.yaml - 使いたいGHCと依存するツールのバージョンを指定する
```

この時できたmy-project.cabalは以下の通り。

```my-project.cabal
name:                my-project
version:             0.1.0.0
-- synopsis:
-- description:
homepage:            https://github.com/githubuser/my-project#readme
license:             BSD3
license-file:        LICENSE
author:              Author name here
maintainer:          example@example.com
copyright:           2019 Author name here
category:            Web
build-type:          Simple
cabal-version:       >=1.10
extra-source-files:  README.md

executable my-project
  hs-source-dirs:      src
  main-is:             Main.hs
  default-language:    Haskell2010
  build-depends:       base >= 4.7 && < 5
```

この後、試しにいったんディレクトリを削除し、~/.stack/config.yamlを編集してからstack newをやり直したところ、
my-project.cabalのauthor、maintainer、copyrightにconfig.yamlで設定した内容が入っていることを確認できた。

## GHCをインストールする
プロジェクトのディレクトリ内で以下のコマンドを実行する。

```
stack setup
```

プロジェクト毎にGHCをインストールするので、
そのプロジェクトにおいて誰でも同じバージョンのGHCで作業することになる。

_おお、これは確かに嬉しい。_
_ただし、GHCは約175MBあるので、回線が貧弱だと辛いかも……。_

## コードを実行してみる
以下のコマンドを実行すると、REPLが起動する。
このインタプリタをGHCiという。

```
stack ghci
```

GHCiが起動したら、コードを入力してEnterで結果が表示される。
また、以下のようにすればメインモジュールを実行できる。

```
*Main> :load Main
[1 of 1] Compiling Main             ( /home/yuki/my-project/src/Main.hs, interpreted )
Ok, one module loaded.
*Main> main
hello world
```

これでHello Worldができた。
